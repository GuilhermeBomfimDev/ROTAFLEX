<div class="home-container">

  <!-- TÍTULOS -->
  <h1 class="title">Bem-vindo ao <span class="highlight">RotaFlex</span>!</h1>
  <h2 class="subtitle">Calcular Rota</h2>

  <!-- FORMULÁRIO -->
  <form [formGroup]="rotaForm" (ngSubmit)="calcularRota()" class="rota-form card">

    <div class="form-row">
      <div class="form-group">
        <label for="origem">Origem</label>
        <input id="origem" formControlName="origem" placeholder="Digite a origem" required>
      </div>

      <div class="form-group">
        <label for="destino">Destino</label>
        <input id="destino" formControlName="destino" placeholder="Digite o destino" required>
      </div>
    </div>

    <button type="submit" [disabled]="rotaForm.invalid" class="btn-submit">
      Calcular Rota
    </button>
  </form>

  <!-- MAPA -->
  <div id="map" class="map-card"></div>

  <!-- RESULTADO -->
  <div *ngIf="resultado && resultado.length > 0" class="resultado">

    <h3 class="resultado-title">Resultados da Rota</h3>

    <div *ngFor="let opcao of resultado" class="card resultado-card">

      <!-- ================= PUBLICO ================= -->
      <ng-container *ngIf="opcao.tipo === 'Público'; else cardPrivado">

        <div class="card-header publico">
          Transporte Público
        </div>

        <div class="card-body">
          <p><strong>Origem:</strong> {{ opcao.origem }}</p>
          <p><strong>Destino:</strong> {{ opcao.destino }}</p>
          <p><strong>Distância:</strong> {{ opcao.distancia }}</p>
          <p><strong>Duração Estimada:</strong> {{ opcao.duracao }}</p>

          <div *ngIf="opcao.passos?.length">
            <h4>Passos da Viagem:</h4>

            <ul class="passos-list">
              <li *ngFor="let passo of opcao.passos">
                <span [innerHTML]="passo.instrucoes"></span>
                <span *ngIf="passo.linha"> • Linha: {{ passo.linha }}</span>
                <span *ngIf="passo.veiculo"> ({{ passo.veiculo }})</span>
              </li>
            </ul>
          </div>
        </div>

      </ng-container>

      <!-- ================= PRIVADO ================= -->
      <ng-template #cardPrivado>
        <div class="card-header privado">
          Transporte Privado
        </div>

        <div class="card-body">
          <p><strong>Descrição:</strong> {{ opcao.descricao }}</p>
          <p><strong>Valor Estimado:</strong> R$ {{ opcao.valorEstimado }}</p>
          <p><strong>Distância:</strong> {{ opcao.distanciaKm.toFixed(2) }} km</p>
          <p><strong>Duração Estimada:</strong> {{ opcao.duracao }}</p>
          <p><strong>Meios:</strong> {{ opcao.meiosDeTransporte.join(', ') }}</p>
        </div>
      </ng-template>

    </div>
  </div>
</div>
